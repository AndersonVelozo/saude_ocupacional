generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Usuario {
  id        Int      @id @default(autoincrement())
  nome      String
  email     String   @unique
  senha     String
  role      Role     @default(RH)
  ativo     Boolean  @default(true)
  criadoEm  DateTime @default(now())
}

enum Role {
  ADMIN
  RH
  CLINICA
}

// ---------------- PACIENTE / EXAME / ASO ----------------

model Paciente {
  id             Int       @id @default(autoincrement())
  nome           String
  cpf            String    @unique
  dataNascimento DateTime?
  cargo          String?
  setor          String?
  empresa        String?
  ativo          Boolean   @default(true)
  criadoEm       DateTime  @default(now())

  exames         Exame[]
  asos           Aso[]
}

model Exame {
  id          Int       @id @default(autoincrement())
  tipo        String
  data        DateTime
  resultado   String?
  anexoUrl    String?
  pacienteId  Int
  paciente    Paciente  @relation(fields: [pacienteId], references: [id])
  criadoEm    DateTime  @default(now())
}

model Aso {
  id          Int       @id @default(autoincrement())
  tipo        String        // Admissional, Peri√≥dico, Demissional, etc
  dataExame   DateTime
  validade    DateTime
  situacao    String        // Apto, Inapto
  observacoes String?
  pacienteId  Int
  paciente    Paciente  @relation(fields: [pacienteId], references: [id])
  criadoEm    DateTime  @default(now())
}
